# Maintainer: falkTX <falktx@gmail.com>

pkgname=kxstudio-artwork
pkgver=20110829
pkgrel=1
pkgdesc="Artwork from the KXStudio Desktop"
arch=(any)
url="http://kxstudio.sourceforge.net/KXStudio:Desktop"
license=('GPL2')
depends=("oxygen-icons")
optdepends=("qtcurve: theme support")
# source=(https://downloads.sourceforge.net/project/kxstudio/Releases/$pkgname-$pkgver.tar.gz)
md5sums=(846490e3ece6342ebeaadd9edeac778b)

_gitroot="git://kxstudio.git.sf.net/gitroot/kxstudio/kxstudio"
_gitname="kxstudio"

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout"
}

package() {
  cd "$srcdir/$_gitname"

  # Make required directories
  mkdir -p $pkgdir/lib/plymouth/themes/
  mkdir -p $pkgdir/usr/share/gnome-background-properties/
  mkdir -p $pkgdir/usr/share/icons/
  mkdir -p $pkgdir/usr/share/kde4/apps/color-schemes/
  mkdir -p $pkgdir/usr/share/kde4/apps/kdm/
  mkdir -p $pkgdir/usr/share/kde4/apps/ksplash/
  mkdir -p $pkgdir/usr/share/kde4/apps/QtCurve/
  mkdir -p $pkgdir/usr/share/themes/
  mkdir -p $pkgdir/usr/share/wallpapers/

  # Compatibility Gnome Theme (QtCurve)
  cp -r artwork/gtk-themes/* $pkgdir/usr/share/themes/

  # QtCurve style
  cp artwork/*.qtcurve $pkgdir/usr/share/kde4/apps/QtCurve/

  # KDE Colors
  cp artwork/color-schemes/* $pkgdir/usr/share/kde4/apps/color-schemes/

  # Icons
  cp -r -P artwork/icons/* $pkgdir/usr/share/icons/

  # KDM Theme
  cp -r -P artwork/kdm/* $pkgdir/usr/share/kde4/apps/kdm/

  # KSplash
  cp -r -P artwork/ksplash/* $pkgdir/usr/share/kde4/apps/ksplash/

  # Plymouth
  cp -r artwork/plymouth/* $pkgdir/lib/plymouth/themes/

  # Wallpapers (KDE and Gnome compatible)
  cp -r artwork/wallpapers/KXStudio-*                   $pkgdir/usr/share/wallpapers/
  cp artwork/wallpapers/kxstudio-wallpapers.xml      $pkgdir/usr/share/gnome-background-properties/
}
